<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0" DefaultTargets="Build">
	<Target Name="DoLocalDeploy" Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
		<!-- Read package version from the manifest -->
		<ItemGroup>
			<DefaultExclude Include="**\.git\**" />
			<DefaultExclude Include="**\.svn\**" />
			<DefaultExclude Include="**\bin\**" />
			<DefaultExclude Include="**\obj\**" />
			<DefaultExclude Include="**\Release\**" />
			<DefaultExclude Include="**\Debug\**" />
			<DefaultExclude Include="**\Test\**" />
			<DefaultExclude Include="**\TestResults\**" />
			<DefaultExclude Include="**\doc\**" />
			<DefaultExclude Include="**\www\**" />
			<DefaultExclude Include="**\*.user" />
			<DefaultExclude Include="**\*.suo" />
			<DefaultExclude Include="**\*.zip" />
			<DefaultExclude Include="**\*.txt" />
			<DefaultExclude Include="**\*.less" />
			<DefaultExclude Include="**\*.psd" />
			<DefaultExclude Include="**\*ReSharper.*\**" />
		</ItemGroup>
		<ItemGroup>
			<InstallInclude Include="..\**\*.ascx" />
			<InstallInclude Include="..\**\*.asmx" />
			<InstallInclude Include="..\**\*.ashx" />
			<InstallInclude Include="..\**\*.css" />
			<InstallInclude Include="..\**\*.html" />
			<InstallInclude Include="..\**\*.htm" />
			<InstallInclude Include="..\**\*.resx" />
			<InstallInclude Include="..\**\*.aspx" />
			<InstallInclude Include="..\**\*.js" />
			<InstallInclude Include="..\**\images\*.*" />
			<InstallInclude Include="..\**\img\*.*" />
			<InstallInclude Include="..\**\i\*.*" />
		</ItemGroup>
		
		<!-- Declare binaries -->
		<CreateItem Include="$(MSBuildDnnBinPath)\R7.Epsilon*.dll">
			<Output TaskParameter="Include" ItemName="BinaryFiles" />
		</CreateItem>

		<!-- Declare skins -->
		<CreateItem Include="..\R7.Epsilon\Skins\**\*.*" Exclude="..\R7.Epsilon\Containers;..\R7.Epsilon\Menu">
			<Output TaskParameter="Include" ItemName="SkinFiles" />
		</CreateItem>

		<!-- Declare containers -->
		<CreateItem Include="..\R7.Epsilon\Containers\**\*.*" Exclude="..\R7.Epsilon\Skins;..\R7.Epsilon\Menu">
			<Output TaskParameter="Include" ItemName="ContainerFiles" />
		</CreateItem>

		<!-- Declare menu -->
		<CreateItem Include="..\R7.Epsilon\Menu\**\*.*" Exclude="..\R7.Epsilon\Skins;..\R7.Epsilon\Containers">
			<Output TaskParameter="Include" ItemName="MenuFiles" />
		</CreateItem>

		<!-- Copy skins -->
		<Copy SourceFiles="@(SkinFiles)" DestinationFolder="$(DnnSkinsPath)\R7.Epsilon\%(RecursiveDir)" />
		
		<!-- Copy containers -->
		<Copy SourceFiles="@(ContainerFiles)" DestinationFolder="$(DnnContainersPath)\R7.Epsilon\%(RecursiveDir)" />
	
		<!-- Copy menu -->
		<Copy SourceFiles="@(MenuFiles)" DestinationFolder="$(DnnMenusPath)\Mega2Epsilon\%(RecursiveDir)" />
		
		<!-- Copy binaries -->
		<Copy SourceFiles="@(BinaryFiles)" DestinationFolder="$(DnnIntallPath)\bin" />

	</Target>
</Project>
